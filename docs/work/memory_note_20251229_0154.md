# Session Note - 2025-12-29 01:54

## Context
Standard workflow per CLAUDE.md. ExCSS is a CSS parser fork for MightyUI/Unity integration.

## Last 3 Tasks Completed

### 1. Dynamic Pseudo-Class Registration API
Added `RegisterPseudoClass()` method to `StylesheetParser` for runtime registration of custom pseudo-classes (e.g., Unity USS selectors). Thread-safe with lock and null validation.
**Commit:** `342a198`

### 2. NotSelector/HasSelector/MatchesSelector Structure
Preserved nested selector structure in `:not()`, `:has()`, `:matches()` instead of converting back to string. Users can now access `InnerSelector` property for programmatic traversal.
**Commit:** `0d981a0`

### 3. Inset Property + README Update
Added `inset` shorthand property (expands to top/right/bottom/left). Updated README with all new features: parser options, selector types, CSS custom properties, AOT compatibility.
**Commit:** `5763cf7`

## Next 3 Tasks Planned

### 1. MightyUI CSSParser Integration
Update MightyUI's `CSSParser.cs` to use ExCSS's `NotSelector.InnerSelector` instead of regex-based `:not()` parsing. Remove `NotClassRegex` and related workarounds. Reference: MightyUI `Assets/Scripts/MightyUI/Core/CSS/CSSParser.cs`.

### 2. Test Coverage for New Features
Audit flagged 0% test coverage for `RegisterPseudoClass`, `InsetProperty`, and new selector types. Add tests in `src/ExCSS.Tests/` covering: basic registration, concurrent access, null handling, inset expansion patterns.

### 3. Publish Updated DLL to Unity Project
Build `netstandard2.0` release and copy `ExCSS.dll` to Unity project's `Assets/Plugins/`. Verify MightyUI CSSParser works with new structured selectors. Path: `dotnet build -c Release -f netstandard2.0`.

## Key Files
- `src/ExCSS/Parser/StylesheetParser.cs` - RegisterPseudoClass API
- `src/ExCSS/Selectors/NotSelector.cs` - nested selector structure
- `src/ExCSS/StyleProperties/Coordinate/InsetProperty.cs` - inset shorthand
- Remote: `git@github.com-mightycogs:mightycogs/ExCSS.git`
